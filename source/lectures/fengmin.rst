量化交易
==============================

1. 什么是量化交易?

 金融，统计，计算机.

2. 量化交易的特点

- 模型化，程序化.
- 易于风险控制.
- 相对易于检验.
- 避免心理干扰.

3. 量化交易的三件武器.

- 大数定律
- 交易科技: 快!
 a) 快速信息处理
 b) 快速成交订单
- 

4. 评估量化交易策略。

 a) 夏普比率/信息比率.
 b) 最大回撤.

5. 科学的研究方法.

 a) 交易成本? 手续费, 流动性成本, 冲击成本, 机会成本.
 b) 过度拟合? 
 c) 人

6. 谁在做量化交易

- 数学
- 计算机
- 物理
- 金融

my life as a quant. reflections on pysics and finance.

7. 高频交易, 统计套利(alpha套利).
8. 可能出现的问题.

- 忽略交易成本
- 过度拟合

交易系统1.0
==============================

1. 基本要求:

- 既可以回测，又可以快速实盘.
- 可以任意扩展指标/信号.
- 可以定义自己的交易执行策略
- 可以同时处理多个合约, 多个策略, 多个账户.

2. 回测, 纸面交易, 实盘交易.

3. 交易策略，执行策略分离.


交易系统2.0: 系统化地做研究
================================

量化交易: 以大数定律的方式挣钱.
传统方法:

- 主信号+约束条件
- 过度拟合

信号系统

- 信号测试
- 信号组合
- 风险模型
- 投资组合

1. 数据库

1.1 原始数据
1.2 信号库

2. 信号研发

2.1 信号构建

- Traditional Signals
- Enhenced Signals
- Acsdamis and White Papers
- New Date Source
- New Market

2.2 信号有效性测试

- Outline and Decline Testing. 

2.3 信号检验

信号衰减.

3. 模型构建

3.1 建模方法

- 线性模型
- 非线性模型
- Regression Tree
- Binomail Modeling

3.2 信号权重

- Dynamic Weighting
- Factor Reduction
- Macro-based Factor Timing
- Kahnm Filter

4. 投资组合

风险模型 
Dara

PS: 行为金融学.
书: 
1. E. P. Chan Quantitative Trading, I，1-2 weeks.
2. Active Portfolio management. 


俸旻，北京大学数学学院学士和博士，曾任职于微软亚洲研究院副研究院，从事网络安全、信息安全研究；曾任职于华为技术有限公司，从事无线通讯技术研究，开发了全球第一套TD-LTE Relay样机；拥有专利国内国际专利20余项。

　　俸旻：非常荣幸来到这儿给大家做一个讲座，这么多人，还有点小紧张。其实这个市场有很多做得比我好的，可能大家接触的比较少，但是我接触的比较多，因为我数学系出身，我的同学里面有很多在这一行做得非常好的。当然还有带我入门的清华计算机系的一个师兄，也做得非常好，希望大家有机会多向他们学习。

　　下面开始讲座，讲座开始会让大家建立一些概念，比如说拿一个量化交易策略让你投资你要知道怎么评估；你做量化交易研究要知道量化交易的流程。然后我会讲一下，量化交易是很复杂的系统工程，我会把我做的计算机的架构，我做的研发系统的架构都给大家说一下。这些是很多对冲基金在用的架构。后面的比较枯燥一点，偏计算机、偏数学。我以前就在做码农，好不容易在做金融了，其实还是在做码农。

　　看一下量化交易，先看一个实例，什么是量化交易。

　　我们做量化交易，先要观察，找一些信号，有人就做观察，假设他看到“一年之中有很多天股指期货价格波动率超过3%”。于是他就有了一个想法，希望在波动率比较大的天判断好方向，加大仓位，在其余天控制亏损。他就打开他的电脑，进行无数次的研究、测试、再研究、再测试。这个很早的策略的实盘曲线如图，这反映了当时的原始思想，就是在有特别明显趋势的天，它大幅度的盈利了，但是其它天在不断的回撤，但是每一天的回撤都特别小，一年赚了30%。这是量化交易1.0的工作方式。最主要的工作是建立模型，写代码，做测试；测试以后发现有问题，需要去改模型，再测试。用数学方法做建模，用计算机做数据处理。在大量统计研究基础上充分运用科学的方法来判断价格方向，它追求的是持续稳定的盈利。

　　量化交易最需要的技能是三块：金融、统计、计算机。金融，了解金融的基本概念，金融相对于后面两者来说，要求稍微低一点。更需要的是后面两个东西：数学与统计，但是数学统计我们需要多高深的知识呢？我是学基础数学的，做数论、密码的。量化交易用不到那么复杂的东西。数学统计需要用到的数学知识包括几个方面：大一的数学分析，线性代数、数理统计、时间序列，主要用大一、大二、大三的知识。但是需要用得比较多的是数学的建模方法、建模思维，把一些东西做数学化的抽象和刻画。你要不断的练习，用数学的抽象描述世界。

　　还有一个是计算机，我们每天工作的大部分时间真的是在写代码。会想模型，要把它测试出来，去分析；过程中还有BUG，要调试。还要搭系统，研发系统和交易系统，系统是很大的较复杂的。计算机是必不可少的，这是你每天做实验的工具。有人问，我到底需要掌握什么样的计算机编程工具。这要看不同的交易策略，做高频交易需要C ；其它策略可以考虑Python、R、Matlab甚至Excel。有人说，计算机技术发展得很快，Machine learning和深度学习可不可以用呢？有可能，但是如果你纯用Machine learning去做交易，很有可能学习出来的维度特别高，拟合的嫌疑很大。

　　量化交易因为是用模型去刻画盈利逻辑，往往容易程序化；也可以通过模型来做风险控制；而且相对易于检验模型是否靠谱和搬迁到其它交易品种上去检验。量化交易还可以避免心理干扰，我的程序放在那儿跑就行了。经常我们的团队说我们出去玩两天，东西放在那儿，不管它，最多在玩的时候把手机掏出来看看程序跑得是不是正常。

　　前面说了程序化，多数情况下我们把程序化交易和量化交易看成是相等的，我更认为量化交易是一个方法论，怎么建模，怎么做模型检验、怎么实验验证和跟踪的过程；而程序化强调它可以自动的运行。

　　量化交易的三件武器：第一件，也是最重要的，量化交易是以大数定律来挣钱。大数定律是我们在大二的时候就学过，我们把每次交易看成是一次赌博，这是一个事件，这个事件是随机变量，如果随机变量的均值能够覆盖成本，我就觉得我有信息优势，我就愿意参加这个赌博；如果覆盖不了成本，你就不要做了，做的越多亏的越多。同时我们希望我们做的次数越多越好，公式下面是N趋向于无穷大，N次独立同分布交易的平均收益随着N不断增大，越来越趋近于它的期望，所以我们要考虑怎么让它的次数更多。

　　第二件武器就是交易科技。量化交易需要交易科技来配合，其中有一条是快，因为我们做交易的参考是信息，而价格是对信息的反应。我们需要交易科技达到快，这就需要你快速地搜集数据，快速地分析数据，快速地发出指令，这些要求你要有一些通讯技术以保障快速的网络连接，同时应该把计算机系统优化，还可以考虑如何用硬件把它加速。当然你也可以考虑做好快速的信息处理，例如现在已经有人在讨论把互联网的大数据拿来做交易分析，就非常需要快速信息处理。有很多文章已经在讨论这个方向，例如有人提出用Twitter来看美国股市。文章写得挺好的，不过这样的分析需要大数据技能比较强的人。不过我对于Twitter来做方向性的预测持保留意见。快可以让你比别人更早的获得行情、更迅速地做判断、更早的报单子进去，从而降低你的交易成本。你可以更快的看到别人报的单子，可以更快的抢到；你抢完了，后面的人只有花更多的成本获取。

　　再举个例子为了取得第一时间的行情，我会研发一些技术。

　　（此处两个空格）比如说中国的期货交易所旧的行情发送机制，没有使用计算机和网络的先进技术，它之前通过单播推送，而不是一下子广播给大家的多播方式。单播是首先发给你，然后发给他。交易所还考虑得周到为了公平，他这一秒，先给第一号发然后2345678。下一秒从第二号开始发23456781。怎么解决这个问题？那我就听多个行情。

　　量化交易第三件武器就是可以跨市场交易。在跨市交易中你可以提高资金的使用效率，分散风险，一份资金可以交易很多市场。无论做高频交易还是做中低频，我都强烈建议大家做多品种，特别是对中低频做多品种是至关重要的。

　　如何评估量化交易策略，评估一个交易策略可以依据许多指标，如果让我只选择一个技术指标，我会选择夏普比率/信息比率，如果你把收益率当做一个正态分布，你知道了它的夏普比，你就知道它的某种VAR。夏普比越大越好，超高频交易能达到6以上，甚至达到十几；低频的可能只有1到3。参考一些美国著名的规模较大的基金，夏普比大概在1附近。当然你还可以看最大回撤这一指标，但是这个是心理指标，是每个人能接受的最大的亏损的范围。这个参数可以通过杠杆来调节，所以只看一个指标我不会看它。但是如果资金投给别人管理，因为控制权不在自己手上，那我还是会看的。这里面我要说一点，量化交易者一般是风险厌恶者，在座的很多同学自己炒股吧，我不知道这次股灾亏得最多的有多少，我估计有人亏损超过50%吧。你们风险能力都比俸老师强，俸老师的风险承受能力只有10%。

　　如何评估它的量化交易策略？这需要确认他是否用科学的研究方法。假设某人拿一个报告给你看。你可以问他：“你的交易成本怎么算？中间有没有过度拟合的可能，怎么判断有没有拟合？”交易成本包括好几个方面，手续费，流动性成本；还有两个很难测的成本，一个是冲击成本，就是说我资金放进去对市场的冲击是怎么样的；还有一个是机会成本。有没有过度拟合，例如某人的策略盈利只有那几天，其它天都没有交易，这明显就是一种拟合。你可以用简单的方法把盈利最大的几天去掉，再看它的夏普比高不高。如果只有几天盈利，我怎么知道未来什么时候能碰到这几天。

　　如何评估量化交易策略还有一个更重要的方面就是人，对于投资来说最重要的就是评估人，这适用于做任何投资，包括做风投，这个人靠谱、这个人能力强，这是最重要的。说说做量化交易的人，穿着有特征吗？我今天都穿得比较正式了。量化交易者穿着的标准特征是，码农穿什么，量化交易的人一般就穿什么，可能穿的就是冲锋衣牛仔裤，熟称“码农套装”。当然只看衣装肯定不靠谱。其实这类人给你介绍量化理财产品，一般会跟你特别地强调风险，之前说过量化交易投资者一般是风险规避者。你接触多了就会发现强调风险越多的人，往往越靠谱的。我自己投资都投给我接触得多了解得多的这样的人。我认为做量化交易的这些人是金融界最踏实的、最天真无邪的一帮人，包括我刚才说的清华的师兄，还有很多做此行我的同学。有一天我跟我同学吃饭，他跟我说人生最后悔的一件事是在本科的时候接了一个开发项目，他被介绍说成他是一个博士。他觉得他撒了谎，不该这样做。这些人真的很单纯？因为他们不求人就可以挣钱，他没有理由不单纯，他没有动机要骗你。

　　谁在做量化交易？其实某种程度上做量化交易的这些人，可以说是实验物理学家，不停做实验、测试、修正，同时特别强调要有实验物理的精神。图中这位大佬就是以前学物理的，后来去做quant。有金融学的理论是以他的名字命名。话说我之前听过一个老师讲课，他说他发明了金融物理学。这个老师讲了一件很有意思的事，他说他做了一个策略特别好，做了20次实验，有19次都明显赚钱了，到20次不够理想但专门等到它赚钱才平仓，最后是百分之百的赚钱。这个人明显不是做物理学的，做物理的要容忍有误差。做量化交易的人员其实有很多学数学、计算机、物理、化学的，理工科的比较多，当然有学金融的。

　　下面来讲量化交易的案例，这是一个实盘交易的帐户，在一年时间里从20多万做到了90多万，业绩相当不错。对高频交易来说，净值曲线比较直的往上走就是特点。另外一个特点:它的手续费交了84万，赚了60多万，手续费比赚的还多。大家看了以后有什么冲动？是不是很想去开赌场？高频交易策略的交易频率特别高，有时几秒就一次交易。有人认为日内交易就是高频交易，这种说法也可以。高频交易没有严格的定义。不过因为持仓时间比较短，所以每次赚钱比较少，但每次都要交手续费，因此手续费占的比例特别高。夏普比（率）很可能在6之上，甚至达到10几。

　　这是统计套利中的Alpha套利，蓝线描述的是Alpha套利的策略净值，红线描述的是沪深300。Alpha套利其实做了多空两个方向的对冲交易，尽量把市场风险暴露控制到最小，也是追求持续稳定的盈利。看图中表格，我推荐大家策略做分年的测试，看看每年的策略的情况，以及策略适应性的大体趋势。我对期货比较熟悉，一般数据会是这样的走势。如果是只针对股指的量化高频策略，从2010年开始夏普比一般会逐年下降，今年会比较特殊；总的来说是因为竞争越来越激烈。但是如果是多品种合在一起的量化期货投资策略，有可能夏普比会逐年提高，因为可以做的品种越来越多。这也可以用作量化交易策略的判断。

　　如果同学想进入量化投资领域，我推荐大家从这两类量化投资策略入手。避免只做多头，风险太大。避免做持仓时间特别长的，交易的品种要尽量多，否则风险可能会很难承受。

　　下面我们来讲讲量化交易的流程，我们分为策略寻找，数据回测，通过虚拟交易系统检验执行，最后才会去做实盘。策略寻找，大家有不同的能力，不同的风格，你需要找适合你自己的策略，包括你的各方面因素：时间投入，编程能力（可不可以做自动化），你的资金量等因素。一般来说不是富二代，资金量还是比较少的，这个时候我推荐大家做期货。俸老师是不是把你往火堆里面推呢？

　　我们要谈谈大家对于风险的认识。大家很多时候会讨论，股票的风险大，还是期货的风险大？估计90%的人会说期货的风险大。如果只是这样模糊地谈风险，我觉得期货风险会更小。因为期货是T 0的，期货可以随时做空，期货可以放杠杆，但是你做期货也可以不放杠杆，无非就是把钱放在那里多一点，这意味着期货给了你更自由的空间，你凭什么说期货的风险比股票的风险大呢？对于风险的认识，更重要的是你去投资的时候你管理得怎么样，而不是侧重于标的资产价格变动的多少；更重要的是你能否抵抗你的贪婪欲望等心理。做投资的其实都希望价格变动，有些还希望价格能较快速变动。它不动投资会有什么收益？重要的是你能否把握价格的变动。所以如果你的资金量比较小，建议大家去做期货。

　　刚才还介绍了另外一种策略，Alpha套利，我个人觉得如果你要做Alpha套利，你应该准备至少两百万。现在同学有投入几千、几万块钱炒股，但多数很难放入量化交易范畴。如果你要做Alpha套利，那些钱不够。量化交易以大数定律的方式挣钱，一支股票一年交易的机会/次数太少的话，怎么足够体现大数定律来？那一定要交易更多的股票才好。要满足大数定律要求的次数多，可以走两个维度：一个是频率高，一个是交易品种多。

　　然后就是确定投资目标，你是追求短期盈利赚快钱还是想做长期的规模收益。赚快钱就做高频交易，刚才十万到九十万的那个就是一年多一点的时间。但是如果做长期的收益，收益期望不要太高。俸老师自己的期望，做长期的收益如果年化可以稳定在10%到20%，最大亏损控制在5%，那就挺好了。以Alpha套利为例，美国市场上目前收益大概年化在6%~10%，中国市场可能是10%~20%。

　　大家一定要磨炼好自己的本领，苦苦的练一年、两年，做好研究，测试严格，你再好好用实盘去做。最后你必须去上实盘，因为上和不上差别很大，又会积累很多经验和知识。不要性急，要锻炼好自己的心态，做好心理准备。

　　量化交易策略的评测之前有提到过，不再重复。这里来谈谈评测中间的陷阱。第一个陷阱，忽略交易成本。之前提到交易成本包括:手续费、流动性成本、冲击成本、机会成本。我们来举一些实例：比如说做跨期套利，单一期货品种有不同到期日的合约，合约的走向应该是比较一致的。所以你可以做它们的价差反转，来寻求盈利。往往很多人拿历史数据回测之后，发现夏普比率非常高，感觉可以随时捡钱。但真实去做了之后，才发现冲击成本其实很高，因为它需要同时交易两个合约，有一个流动性好点，有一个流动性差点。有时某个合约没有抓住，要去追单子，一下子成本就付出去很多。跨期套利做的是价格的反转，每次赚的钱少，交易成本占比非常高的，如果成交价格再滑一下，发现十次赚的钱一次就亏出去了。我们自己也有做市(Market Making)的策略，为市场提供流动性，市场行情显示了买卖价，我们的报价是在买卖价中间。回测的时候，根本不知道这个报单会不会成交，这就是机会成本。回测时候也不知道机会成本具体是多少？例如用TF国债期货去做策略测试，夏普比率完全可以大于十，真实交易会发现太坑爹了。

　　量化交易做了回测，夏普比只能说给了你一个指示，并不代表着未来你的策略就会跑的一样好。那也可能是拟合的结果。若你做了样本外的测试解释力度会强一些，不过我们始终要有颗心，拟合会是一个很大的陷阱。怎么防止过度拟合呢？主要是策略参数一定不要太多。交易次数除以参数个数的数字一定要比较大才好，比较大大数定律才能呈现出来，要不然是假象。

　　总之陷阱很多，大家一定要有严肃的科研精神，一定要把模型做得越严格越好，让你有充分的自信，再做实盘。

　　下面我开始讲比较枯燥的东西，也是干货。量化交易系统1.0，还有一个2.0，它们两个其实侧重点不一样。1.0是交易系统偏计算机软件体系结构；2.0更侧重于做系统化的研发，是指系统化地做量化交易研究。

　　1.0系统是完全由我一个人开发的，我想让我的交易系统既可以做回测，又可以做快速地实盘交易；还可以很方便的扩展指标或者信号；我可以定义自己的交易执行策略；还可以同时处理多个合约、多个策略、多个账户。量化交易本来就要求同时交易多个合约为好，甚至可以考虑用合约1的信号做合约2；可以同时做多个策略，资金使用率提高，风险分散；还可以多个帐户，有很多客观地需求。

　　同时支持回测和实盘，我设置两个接口来实现，一个接口读行情，一个接口做交易。读行情接口有两个派生，一个是从文件里面读数据，一个是从实盘行情服务器读数据。交易接口也有两个派生，一个是下单通过网络报出去，一个是下单下到文件里。这样回测、纸面交易和实盘交易的实现就是搭不同的积木。回测是把历史数据灌进来，下单到文件，最后统计一下回测结果好不好。真实的交易无非是听真实的行情，把单子报到网络中去。纸面交易则是听取真实的行情，下单下到文件中去。

　　为了很方便地扩展指标和信号，可以设定一个指标计算的接口作为父类。具体的指标或者信号由接口派生出来，行情其实也可以作为一种特殊的指标或者信号。

　　我们还做了指标计算和交易策略的分离，比如说同时管理多个帐号，多个帐号可以用同样的策略，做了分离之后指标/信号计算就可以只算一次。这样的分离也避免了策略业务逻辑的复杂化。

　　我们还要做交易策略和执行策略的分离，执行策略是描述我的单子怎么去执行的。例如我的单子特别大的时候，需要配合一些算法，把单子拆分成细的、小的单子；如果你一次把一个大单子放进去，别人就会看到了你的需求，他就会想怎么赚你的钱，这样不好。把单子拆小，让自己的冲击成本减少；而对于高频交易虽然不大需要单子的拆分，但是也要处理很多复杂的东西，比如说订单的成交细节和撤单细节等。

　　这是一个可行的架构，这个架构是真实交易的架构，分为几个线程。真实交易肯定是多线程的网络程序，有行情线程、订单回报线程，还有数据处理的线程。行情线程收到行情后，把时间信息放到队列里面去，把行情信息放到内存里面，然后通知中间的数据处理现场说：“新的行情来了，数据准备好了，你开始处理吧！”然后中间的线程就去看，哪些指标/信号计算、哪些交易策略关联到这个合约的行情，挨个调用挨个计算，在交易策略中可能会涉及到报单，就把单子报出去。报出去以后，要等交易回报线程通知。可能会通知你的单子报错了；可能会通知你单子成交多少手等等。通知存到共享内存中，订单回报现场再知会信息处理线程：“单子成交了，你处理吧。”这中间可以建很多的数据处理线程，达到并行的目的。

　　下面来分享一下系统化做研究的方法，我们始终强调量化交易是以大数定律的方式来挣钱。先来看看传统的方法，一般我们入门都会用这样的方法:我们会去想一个赚钱逻辑，用模型把它刻画出来，然后放数据在上面跑。这样的方法完全可以赚钱。例如前段时间运行过的一个策略：股指期货主力合约在短时间大幅变动时候，次主力合约跟得不及时；这个时候我就去做次主力。这个策略还不错，但容量很小，毕竟做次主力，流动性成本也很高。拿了40万去做，一天赚了75%。所以有时很多想法很简单，的确有些策略论坛都会写，做一些小改动也许就可以较稳定盈利。但是在我们照搬或者构思了盈利逻辑进行回测之后，会发现总有些地方有大坑。大家自然去想，我能不能做一个过滤器把这个坑滤掉；于是做了止损/过滤，但最后发现夏普比变低了。这样做不是不可以，但是这样做其实和大数定律挣钱的思维是相反的。加过滤器就是减少了交易次数。这就是传统的方法主信号加约束条件，但是添加约束条件其实是在做拟合。系统化的研究方法是怎么样呢？推荐一本书给大家，《Active Portfolio Management》（《主动投资组合管理》）华尔街的圣经，可以给大家答案。这本书可以反复读。（另外一本量化交易入门的书《Quantitative Trading: How to Build Your Own algorithmic Trading Business》，可以快速读。带着两个问题去读：如何评估量化交易策略；量化交易研发的流程是什么。）系统化研究是做信号系统，多数量化基金的研究方法，它会考虑信号测试、信号组合、风险模型、投资组合几个部分。

　　信号系统分了四个步骤，第一步建立数据库，第二步做信号研发，第三步模型构建，第四步投资组合。数据库里面首先有原始的数据包括行情数据、基本面数据等，还有我们已经测试过的信号库。原始数据就是价格、量等等的时间序列，信号库就是信号的时间序列。信号研发，我们要先做信号的构建，你可以通过已有的资料找两三百个潜在的信号，还可以做增强的信号，还可以考虑新的市场，新的数据源。互联网大数据我觉得也是有可能的，但是也需要谨慎。刚才我说了，通过Twitter的数据来做我持怀疑态度，一是噪音太多，二是一般价格会快过于新闻，新闻出来的时候价格早就走了。但是它可能是风险的因子，用Twitter/微博的数据，或者谷歌/百度里面股票点击量的数据，有可能是一个很好的风险因子。一些需要经过长时间才消化的数据倒可能用于做alpha因子，比如说淘宝某个商品的销量，比如说我们航拍得到的一个码头船的数量，可以统计卡车通过高速公路次数，可以收集房地产每户的水费电费。

　　然后就是信号的有效性测试，构建一个信号出来，需要测试这个信号靠不靠谱，就是说看信号数值和未来的收益率相关性怎么样。你可以把信号和收益二维的平面散列图画出来，看一下趋势是怎么样的；一般不是线性，要考虑怎么把非线性变成线性。如何用最少的参数把它变成线性信号，得到新信号和未来的收益率的关系。相关系数绝对值大的，这个信号就不错。但是一般测出来的都很小，大的早就被人弄完了。所以往往一个信号是不够的，要做多个信号。先测试一个信号，再看这个信号相对已有的信号库来说，有没有信息增量，没有信息增量这个信号就没有用。你也可以算算不同信号之间的相关系数，相关系数太高你就不要了。如果可以，把它放到信号库里面去做多信号的组合。怎么把多个信号组合在一起得到一个新的信号？这里列举了一些很复杂的方法，神经网络等等。我建议大家用越简单的方法越好。通过这部分研发，系统可以得到每个时间点各交易合约的预期收益率。

　　下面还有一件事就是做投资组合，投资组合就是知道了收益率，知道了风险，解决一个优化问题。刚才我们已经得到预期收益率，我们还需要得到它的风险。要得到风险，推荐大家去看一些风险模型相关的文章，交易股票可以找到若干风险因子，有基本面因子、统计因子，宏观因子等。但是绝对不能把三千支股票简单的计算一下协方差矩阵来做结果。有了风险模型加上前面的预期收益率就可以做投资组合。投资组合决定了仓位，当然投资组合也不是那么简单的优化，还要加很多约束条件，例如考虑换手率，不然都给股票交易所做贡献了。像针对机构投资者的基金会给一些额外的限制，你的股票投入在每个板块不能超过多少；当你超过了限制，机构投资者就会过来找你麻烦。作为同学入门来说，可以先从传统方法入手，后面再考虑走向系统化方法的道路。

　　不同类型的策略，框架会有区别。例如高频交易就不大需要做复杂的风险模型。但是对于中低频，我个人建议一定要上风险模型。上和不上区别是很大的。风险模型有很多应用，主动式基金、被动式基金都需要用到风险模型。系统化工程要是一个人去搭还是挺困难的，可以寻求合作。

　　“矿”工的路还是满辛苦的，非常感谢大家来到这个“矿”工的世界里！

　　下面是精彩的问答环节：

　　提问：前一段时间发生股灾，千股跌停，您做的量化交易是怎样应对这种情况的？

　　俸旻：股灾对于不同的策略影响不大一样。例如高频交易就不大害怕股灾，因为它可以把握快速的脉搏，甚至它可以在股灾中获得较大的利润。高频交易绝对不是造成股灾的始作俑者，它其实能让价格快速地回归到理论值。股灾中的恐慌，最大的原因其实是人类的贪婪，肆无忌惮地融资放大杠杆，而量化交易能较客观地去确定自己投资的合理杠杆水平。对于我前面推荐的Alpha套利策略，这次股灾对它的影响还是巨大的。股灾时候最大的风险已经超出模型可以管控的范围，那时最大的风险是政策风险。举个案例，一个人做Alpha套利，多头用股票，空头用股指期货，某天期货临近到期日要移仓，但他平仓之后发现无法开仓。这会造成裸多头，还有很多停牌的股票，简直会坑死人。我们非常支持救市，绝不能让股灾引发金融系统的崩溃。

　　问：目前世界上有没有比较成熟的量化交易平台？不包括策略。

　　俸旻：现在有一些量化平台，国内有人使用TB、MC等等。但是我不用它们，因为慢，信息可能泄露，而且用了平台，手续费会变高。支持量化交易2.0系统的开放平台好像还没有，都在基金公司内部吧。

　　提问：量化交易对于高性能数据处理有什么要求？比如说计算机高性能数据处理，并行计算、超级计算机，需不需要类似技术的介入？

　　俸旻：这些技术是需要的。很多量化交易会牵涉到多参数组测试，计算量还是非常大的。所以是多核计算、分布式、云运算的很好的应用场景。

　　提问：高频交易用到的策略是有寿命的，怎么知道它该淘汰了？

　　俸旻：我们做量化交易，会持续跟踪策略的性能，比如观察一些指标的显著变化。例如突然跌破了历史的最大回撤，我们就会很谨慎，可能调整些东西。可能调低杠杆，也有可能把它停了。需要依据不同情况做处理，但是肯定会继续跟踪。

　　提问：做量化交易的信号模型是否像学生做实验一样，需要有一个理论依据？还是需要第六感或者直觉把这种参数找出来？

　　俸旻：就我个人而言，更倾向于有理论依据。你可以用金融学、经济学、行为金融学等专业或者课程做背景，也可以用市场观察来说话，模型有理论依据支撑心里更有底啊。我个人认为行为金融对中国市场比较有效，因为中国市场80%以上是散户。也推荐做量化交易的朋友们多去看看其它方面的书，比如说社会心理学、行为金融学、生态学等等。

　　提问：做高频交易，网络本身就已经很慢了，如何能把交易速度提高，做到快速交易？

　　俸旻：你可以请网络专家，计算机专家来优化你的系统。你要和经纪商合作，因为网络不是你可以直接干预的。你可以把它做到硬件上去，技术发展，永无止境。你要评估自己的能力，根据你的能力选择你的策略类型。例如我现在绝对不敢去美国市场做高频交易，那边那么多公司，无论是通讯技术还是策略都牛得不得了，我过去就是找死。如果我做海外市场可能会选择做一两天为频率的策略。知己知彼很重要。可以不和别人拼速度，拼智慧，拼策略，拼风险模型。

　　提问：您认为量化交易还有多大的市场可做？

　　俸旻：量化交易的市场应该还是非常大的，中国在起步阶段。量化交易分高频和中低频，高频的市场规模很小，中低频就很大了。而且量化交易也可以和传统交易配合，发挥各自所长。现在出了很多政策来限制量化交易，各个交易所的征求意见稿也发出来了。限制不一定是坏事，很多海外的基金被拒之门外。还是会逐步放开，促进市场更有效。

　　提问：信号对量化交易是很重要的，但是随着使用量化交易的人越来越多，大家都会发现这些信号，而信号是有限的，产生新信号需要很长时间。在没有挖掘出新信号之前，使用已有信号的人达到了饱和怎么办？

　　俸旻：在达到之前，策略应该会有反应，需要去做调整甚至暂停。争抢的人肯定会越来越多。有些策略简直就是教科书一样的，此时你必须赶在别人前面，让别人跟在你后面做。

　　提问：如果我们不在高频交易里面混，我们做长期一点的趋势跟踪策略。现在大家都玩高频，趋势跟踪策略还有没有存活的空间？

　　俸旻：有，绝对有！如果你速度不能和别人比，你就在其它方面建立自己的优势。高频市场很小，量化交易也不会把所有市场占完；长时间来看传统交易无论在国内还是国外管理规模都会大于量化交易。这块蛋糕吃不了，可以选其它蛋糕吃，你要发现你的优势，选择你擅长的，我自己肯定也不去做找死的事情。

　　提问：当资金量变大的时候有些策略的收益会降低，您是怎么控制这个的？

　　俸旻：你问的是策略容量的问题，我们的策略都是有容量的，我们刚才说要算冲击成本、机会成本。你的单子越大，成本就越高，直到大到一定的数量，你没有额外增加的收益了，这就是容量。比如说做一个高频交易，容量很小，日内的超高频交易，几十万、几百万、一千万的容量。但是日内的中低频容量可以拿到上亿的容量，股票可以做到几十亿，甚至上百亿的容量。但是一定要有容量的概念，不要无止境的做下去。

　　提问：策略资金容量增大的时候，它的夏普值是什么样变化的？您会把夏普值做到多少就不做了？

　　俸旻：对于高频交易我会考虑单个品种的容量是多少，可以接近那个容量去下单。但是对于中低频，因为中间还会牵涉到投资组合，你会调整你不同品种的持仓，你应该有个换手率的约束。不能无止境放大资金管理规模，夏普值肯定会降低甚至变负。要把交易成本特别是隐性成本计算好，然后根据你的收益预期和风险承受能力而定管理好大规模吧。对于我来说：长线投资期望收益率在10%到20%，回测控制在5%；高频交易，夏普比追求大于6，至少不低于3；中低频夏普比追求大于2.5，至少不低于1.5吧。

　　提问：我看新闻上报道过量化交易中80%的订单会被撤单而无法成交。这个报单的目的是不是为了影响市场情绪？

　　俸旻：撤单和策略的类型有关系，做市策略肯定撤单率高。市场上有影响市场情绪的交易者，例如突然放一个假单子在上面，假装需求特别大，然后立马撤掉。还有交易者操纵市场。这些操作是涉嫌违规或者违规的，大家不要去做，不值得。

责任编辑：张文慧

